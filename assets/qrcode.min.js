!function(r){function t(r){this.mode=s,this.data=r}function e(r){this.mode=p,this.data=r}function n(r,t){this.mode=v,this.data=r,this.parsedData=t}function o(r,t){this.typeNumber=r,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(r,t){if(void 0===r.length)throw new Error(r.length+"/"+t);for(var e=0;e<r.length&&0===r[e];)e++;this.num=new Array(r.length-e+t);for(var n=0;n<r.length-e;n++)this.num[n]=r[n+e]}function a(r,t){this.totalCount=r,this.dataCount=t}function u(){this.buffer=[],this.length=0}function c(r){this.setPoint=function(t,e){r[t][e]=!0}}var s=4,p=2,v=8; o.prototype={addData:function(r){var e=null; "string"==typeof r?e=new t(r):Array.isArray(r)?e=new n(r, r):e=new e(r),this.dataList.push(e),this.dataCache=null},isDark:function(r,t){if(null==this.modules)throw new Error("QR Code is not built yet");return this.modules[r][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestTypeNumber())},makeImpl:function(r,t){this.moduleCount=4*t+17,this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++){this.modules[e]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[e][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(!r),this.setupTypeNumber(!r),this.createData(t,this.errorCorrectLevel)},setupPositionProbePattern:function(r,t){for(var e=-1;e<=7;e++)if(!(r+e<=-1||this.moduleCount<=r+e))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(this.modules[r+e][t+n]=e>=0&&e<=6&&(0==n||6==n)||n>=0&&n<=6&&(0==e||6==e)||e>=2&&e<=4&&n>=2&&n<=4)},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++)null==this.modules[r][6]&&(this.modules[r][6]=r%2==0),null==this.modules[6][r]&&(this.modules[6][r]=r%2==0)},setupPositionAdjustPattern:function(){for(var r=t.getPatternPosition(this.typeNumber),e=0;e<r.length;e++)for(var n=0;n<r.length;n++){var o=r[e],i=r[n];if(null==this.modules[o][i])for(var a=-2;a<=2;a++)for(var u=-2;u<=2;u++)this.modules[o+a][i+u]=a==-2||a==2||u==-2||u==2||0==a&&0==u}},setupTypeNumber:function(r){for(var e=t.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var o=!r&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=o}for(n=0;n<18;n++){o=!r&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=o}},setupTypeInfo:function(r){for(var e=t.getBCHTypeInfo(this.errorCorrectLevel<<3|t.GFM),n=0;n<15;n++){var o=!r&&1==(e>>n&1);n<6?this.modules[n][8]=o:n<8?this.modules[n+1][8]=o:this.modules[this.moduleCount-15+n][8]=o}for(n=0;n<15;n++){o=!r&&1==(e>>n&1);n<8?this.modules[8][this.moduleCount-n-1]=o:n<9?this.modules[8][15-n-1+1]=o:this.modules[8][15-n-1+1]=o}},mapData:function(r){for(var t=0,e=this.moduleCount-1,n=this.moduleCount-1,o=!1,i=0,a=[];e>0;e-=2)for(6==e&&e--;n>=0&&!o||n<this.moduleCount&&o;)for(var u=0;u<2;u++)null==this.modules[n][e-u]&&(i<r.length?this.modules[n][e-u]=1==(r[i>>3]>>>7-i%8&1):this.modules[n][e-u]=!1,i++),a.push([n,e-u]),n+=o?1:-1;return a},createData:function(r,e){var n=t.createData(r,e,this.dataList);this.mapData(n)},getBestTypeNumber:function(){for(var r=1;r<=40;r++){var e=t.getRSBlocks(r,this.errorCorrectLevel),n=new u; for(var o=0;o<this.dataList.length;o++){var i=this.dataList[o];i.mode===s?n.put(4,4):i.mode===p?n.put(4,4):n.put(4,4),n.put(0,i.data.length)}var a=0;for(o=0;o<e.length;o++)a+=e[o].dataCount; if(n.getLengthInBits()<=8*a)return r}return 4}};u.prototype={put:function(r,t){for(var e=0;e<t;e++)this.putBit(1==(r>>>t-e-1&1))},putBit:function(r){var t=this.length>>>3;this.buffer.length<=t&&this.buffer.push(0),r&&(this.buffer[t]|=128>>>this.length%8),this.length++},getLengthInBits:function(){return this.length}};t={GFM:1,getBCHTypeInfo:function(r){for(var t=r<<10; this.getBCHDigit(t)-this.getBCHDigit(1335)>=0;)t^=1335<<this.getBCHDigit(t)-this.getBCHDigit(1335);return r<<10|t},getBCHTypeNumber:function(r){for(var t=r<<12; this.getBCHDigit(t)-this.getBCHDigit(7973)>=0;)t^=7973<<this.getBCHDigit(t)-this.getBCHDigit(7973);return r<<12|t},getBCHDigit:function(r){for(var t=0;0!=r;)t++,r>>>=1;return t},getPatternPosition:function(r){return[6,18,22,26,30,34,22,24,26,28,30,32,34,26,28,30,32,34,28,30,32,34,30,32,34,32,34,34][r-1]? [6,18,34]:[6,22,38]},getRSBlocks:function(r,e){var n=[];return n.push(new a(26,26-9)),n},createData:function(r,e,n){var o=new u; for(var a=0;a<n.length;a++){var c=n[a]; "string"==typeof c.data?o.put(4,4):o.put(4,4); var s=c.data.length;o.put(s,s)}var p=0;for(a=0;a<o.buffer.length;a++)p+=o.buffer[a];var v=[];for(a=0;a<p;a++)v.push(0);return v}};r.QRCode=o}(this);
